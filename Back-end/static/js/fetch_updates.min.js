$(document).ready(function(){let a=parseInt($("#tickers_count").val());function e(e){if($.fn.dataTable.isDataTable("#table-container")){var t=$("#table-container").DataTable();t.clear().rows.add(e.data).draw(!1),console.log(a),t.rows().count()>=a?$("loader_table").fadeOut("400"):$("#table-container_info").append('<img id="loader_table" src="/static/img/loader.gif">')}else $(".main-header").hide(),$("#table-container").empty().dataTable({data:e.data,columns:e.columns,retrieve:!0}),$("#table-container_info").append('<img id="loader_table" src="/static/img/loader.gif">')}!async function(){const a=(await fetch("/monitoring_stream")).body.getReader();let t={};for(;;){const{value:n,done:o}=await a.read();if(o)break;try{let a=new TextDecoder("utf-8").decode(n),o=JSON.parse(a);binance_data=o.binance,kraken_data=o.kraken;let c={data:[],columns:[]};for(stock in o)for(const[a,e]of Object.entries(o[stock]))t.hasOwnProperty(a)?"binance"===stock?t[a][1]=e:"kraken"===stock&&(t[a][2]=e):"binance"===stock?t[a]=[a,e,"-"]:"kraken"===stock&&(t[a]=[a,"-",e]);c.data=Object.values(t),c.columns=[{title:"pair"},{title:'<img class="columns_logo" src="/static/img/binance_logo.svg" alt="binance"/>'},{title:'<img class="columns_logo" src="/static/img/kraken_logo.png" alt="kraken"/>'}],e(c)}catch(a){}}}()});